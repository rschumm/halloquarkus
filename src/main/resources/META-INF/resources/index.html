<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex">
  <meta charset="utf-8">
  
  <title>QUARKUS Hallo Welt</title>
  
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <link rel="stylesheet" type="text/css" href="main.css" />
  <link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet">


  



  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>





  <script src="https://intercoolerjs.org/release/intercooler-1.2.2.js"></script>

  

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>  


  <script>
    var source = new EventSource("/prices/stream");
    source.onmessage = function (event) {
        document.getElementById("price").innerHTML = event.data;
    };

    var source = new EventSource("/hallo/stream");
    source.onmessage = function (event) {
        document.getElementById("nachricht2").innerHTML = event.data;
        document.getElementById("nachricht2").classList.remove("newmessage"); 
        document.getElementById("nachricht2").offsetWidth;
        document.getElementById("nachricht2").classList.add("newmessage"); 
        load(); 
    };
  </script>





</head>

<body>

<nav class="navbar navbar-light bg-light">
  <a class="navbar-brand" href="#">
    <img src="https://www.schumm.ch/favicon.ico"  height="25" alt="Schumm">
  </a>
  <div>
    <a class="navbar-brand" href="https://quarkus.io">
        <img src="quarkus_icon.png"  height="30" alt="QUARKUS">
    </a>
    <a class="navbar-brand" href="https://www.postgresql.org/">
      <img src="https://www.postgresql.org/media/img/about/press/elephant.png"  height="30" alt="PostgreSQL">
    </a>
    <a class="navbar-brand" href="http://kafka.apache.org/">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Apache_kafka.svg/631px-Apache_kafka.svg.png"  height="30" alt="Kafka">
    </a>

  </div>
</nav>


<div  id="app" class="container">



<div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
      <h1 class="display-4">Rémy QUARKUS Java Demo App</h1>
      <p class="lead">Demo Application</p>
</div>

<div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto">  

    <p class="text-center">Kafka Stream of random numbers: </p>
    <h3 class="display-4 text-center" id="price">n</h3>


    <div class="table-responsive">

        <table class="table ">
          <tbody >
            <tr> 
              <td>from REST Service: </td><td id="nachricht">r</td>
            </tr>

            <tr> 
                <td>from Kafka Stream of Messages:</td><td id="nachricht2">ks</td>
            </tr>


          </tbody>
        </table>
      
      
      </div>


    <form>
    <div class="input-group">
      <input type="text" class="form-control" placeholder="Nachricht an mich" aria-label="Input group example" aria-describedby="btnGroupAddon" name="textinput">
      <button type="submit" class="btn btn-primary btn-default" ic-post-to="/hallo/sali" ic-target="#nachricht" ic-on-success="load();">
        Click Me!
      </button>
    </div>
    </form>
</div>





<div class="table-responsive">

  <table class="table table-dark table-striped">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Nachricht</th>
      </tr>
    </thead>
    <tbody  id="nt">

    </tbody>
  </table>


</div>





  <div class="card-deck mb-3 text-center">
    <div class="card mb-4 shadow-sm">
      <div class="card-header">
        <h4 class="my-0 font-weight-normal">QUARKUS and Kafka</h4>
      </div>
      <div class="card-body">
        <h2 class="card-title pricing-card-title">Supersonic Subatomic Java</h2>
        <ul class="list-unstyled mt-3 mb-4">
          <li><q>QUARKUS used as Demo Case for Cloud Native Applications</q></li>
          <li>REST-ful Backend</li>
          <li>PostgreSQL Database with Hibernate ORM</li>
          <li>Kafka Messaging Bus deployed by Strimzi Operator</li>
          <li>Bootstrap HTML Frontend</li>
        </ul>
      </div>
    </div>
    <div class="card mb-4 shadow-sm">
      <div class="card-header">
          <h4 class="my-0 font-weight-normal">PostgreSQL</h4>
        </div>
        <div class="card-body">
          <h2 class="card-title pricing-card-title">Panaché ORM</h2>
          <ul class="list-unstyled mt-3 mb-4">
            <li>Data is backed by my favourite Database, the most advanced OpenSourceDatabase of the world... </li>
          </ul>
        </div> 
    </div>
    <div class="card mb-4 shadow-sm">
      <div class="card-header">
        <h4 class="my-0 font-weight-normal">OpenShift</h4>
      </div>
      <div class="card-body">
        <h2 class="card-title pricing-card-title">deployed on OpenShift</h2>
        <ul class="list-unstyled mt-3 mb-4">
          <li>This Application is built as Cloud Native binary by source-to-image, </li>
          <li>deployed and operated by OpenShift. </li>
        </ul>
      </div>
    </div>


    



  </div>	




	<address class="mt-3" >
    <small>
      <p>
        <span class="glyphicon glyphicon-info-sign"></span> Prototyp für QUARKUS Applikation auf OpenShift and Virtual Machines. 
      </p>		
      <p>Rémy Schumm, 2019  - hergestellt in der Schweiz </p> 
      
      <small>
        Powered by <a href="https://quarkus.io/">QUARKUS Supersonic Subatomic Java </a> 
      </small>
      
    </small>
  </address>
</div>



<script>

function load(){
  $.ajax({
    url: '/hallo/logbuch',
    type: 'GET',
    success: function (response) {
        var trHTML = '';
        $.each(response, function (i, item) {
            trHTML += '<tr><th scope="row">' + item.id + '</th><td>' + item.text + '</td></tr>';
        });
        $('#nt').empty();
        $('#nt').append(trHTML);
    }
  });
}

load(); 

</script>


</body>

</html>